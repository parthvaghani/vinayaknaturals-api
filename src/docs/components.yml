components:
  schemas:
    AddressInput:
      type: object
      properties:
        label:
          type: string
          enum: [Home, Office, Other]
        addressLine1:
          type: string
        addressLine2:
          type: string
        city:
          type: string
        state:
          type: string
        zip:
          type: string
        country:
          type: string
    User:
      type: object
      properties:
        id:
          type: string
        email:
          type: string
          format: email
        phoneNumber:
          type: string
        user_details:
          type: object
          properties:
            address:
              type: string
            city:
              type: string
            state:
              type: string
            country:
              type: string
        name:
          type: string
        role:
          type: string
          enum: [user, admin]
        kycVerificationStatus:
          type: string
          enum: [PENDING, APPROVED, REJECTED, PENDING]
          description: Current status of the user's KYC verification
      example:
        id: 5ebac534954b54139806c112
        email: fake@example.com
        name: fake name
        role: user
        kycVerificationStatus: PENDING
    Document:
      type: object
      properties:
        id:
          type: string
        userId:
          type: string
          description: ID of the user who uploaded the document
        documentType:
          type: string
          enum: [AADHAAR, PAN, PASSPORT, DRIVING_LICENSE, OTHER]
        documentNumber:
          type: string
          description: Document identification number (e.g., Aadhaar number)
        files:
          type: array
          items:
            type: object
            properties:
              fileType:
                type: string
                enum: [FRONT, BACK, OTHER]
              fileUrl:
                type: string
                format: uri
        status:
          type: string
          enum: [PENDING, APPROVED, REJECTED]
        remarks:
          type: string
          description: Admin remarks when approving/rejecting KYC
        verifiedBy:
          type: string
          description: ID of the admin who verified the document
        verifiedAt:
          type: string
          format: date-time
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      example:
        id: 5ebac534954b54139806c115
        userId: 5ebac534954b54139806c112
        documentType: AADHAAR
        documentNumber: XXXX-XXXX-1234
        files:
          - fileType: FRONT
            fileUrl: https://example.com/documents/front.jpg
          - fileType: BACK
            fileUrl: https://example.com/documents/back.jpg
        status: PENDING
        createdAt: 2023-01-01T10:00:00.000Z
        updatedAt: 2023-01-01T10:00:00.000Z
    Bank:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        bankKey:
          type: string
        status:
          type: string
          enum: [active, inactive]
        envType:
          type: string
          enum: [test, live, both]
      example:
        id: 5ebac534954b54139806c113
        name: Akhand Anand Co.op Bank
        bankKey: akhand-anand-co-op-bank
        status: active
        envType: test
    QrCode:
      type: object
      properties:
        id:
          type: string
        slug:
          type: string
          description: Order slug for the QR code
        referId:
          type: string
          description: Reference ID for the QR code transaction
        userId:
          type: string
          description: ID of the user who generated the QR code
        orderId:
          type: string
          description: Unique order identifier
        qrCode:
          type: string
          description: Base64 encoded QR code image
        amount:
          type: number
          description: Payment amount
        status:
          type: string
          enum: [paid, unpaid]
          description: Current payment status
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      example:
        id: 5ebac534954b54139806c114
        slug: order-12345
        referId: REF-67890
        userId: 5ebac534954b54139806c112
        orderId: ORDER-123456
        qrCode: data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z8DwHwAFBQIAX8jx0gAAAABJRU5ErkJggg==
        amount: 1000
        status: unpaid
        createdAt: 2023-01-01T10:00:00.000Z
        updatedAt: 2023-01-01T10:00:00.000Z
    Otp:
      type: object
      properties:
        success:
          type: boolean
        otp:
          type: number
        expireAt:
          type: string
        message:
          type: string
      example:
        success: true
        otp: 684654
        to: '2024-06-10T10:49:27.204Z'
        createdAt: 'OTP sent successfully'

    Token:
      type: object
      properties:
        token:
          type: string
        expires:
          type: string
          format: date-time
      example:
        token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1ZWJhYzUzNDk1NGI1NDEzOTgwNmMxMTIiLCJpYXQiOjE1ODkyOTg0ODQsImV4cCI6MTU4OTMwMDI4NH0.m1U63blB0MLej_WfB7yC2FTMnCziif9X8yzwDEfJXAg
        expires: 2020-05-12T16:18:04.793Z

    AuthTokens:
      type: object
      properties:
        access:
          $ref: '#/components/schemas/Token'
        refresh:
          $ref: '#/components/schemas/Token'

    Cart:
      type: object
      properties:
        id:
          type: string
          description: Cart item id
        productId:
          type: string
          description: Product id
        userId:
          type: string
          description: User id
        totalProduct:
          type: number
          description: Quantity of this product in cart
        weight:
          type: string
          description: Selected product weight/variant (e.g., '250gm' or '1kg')
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      example:
        id: 66b1a4f6d5d3c3a1b2c4d6e8
        productId: 66b1a4f6d5d3c3a1b2c4d6e7
        userId: 66b1a4f6d5d3c3a1b2c4d6e6
        totalProduct: 2
        weight: "250gm"
        createdAt: 2025-08-10T12:00:00.000Z
        updatedAt: 2025-08-10T12:00:00.000Z

    Error:
      type: object
      properties:
        code:
          type: number
        message:
          type: string

    CommissionConfig:
      type: object
      properties:
        commissionType:
          type: string
          enum: [payin, payout]
          description: Type of commission (payin or payout)
        startRange:
          type: number
          description: Starting amount range for this configuration
        endRange:
          type: number
          description: Ending amount range for this configuration
        chargeType:
          type: string
          enum: [percentage, fixed]
          description: Type of charge (percentage or fixed amount)
        value:
          type: number
          description: Charge value (percentage or fixed amount)
      example:
        commissionType: payout
        startRange: 0
        endRange: 0
        chargeType: percentage
        value: 5

  responses:
    DuplicateEmail:
      description: Email already taken
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            code: 400
            message: Email already taken
    Unauthorized:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            code: 401
            message: Please authenticate
    Forbidden:
      description: Forbidden
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            code: 403
            message: Forbidden
    NotFound:
      description: Not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            code: 404
            message: Not found
    BadRequest:
      description: Bad request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            code: 400
            message: Bad request
    KycRequired:
      description: KYC verification required
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            code: 403
            message: KYC verification required. Please complete your KYC verification before proceeding.

  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
